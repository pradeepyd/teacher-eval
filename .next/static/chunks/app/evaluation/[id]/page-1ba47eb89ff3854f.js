(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1689],{26126:(e,t,r)=>{"use strict";r.d(t,{E:()=>c});var s=r(95155);r(12115);var a=r(99708),i=r(74466),n=r(59434);let l=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:r,asChild:i=!1,...c}=e,d=i?a.DX:"span";return(0,s.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(l({variant:r}),t),...c})}},35695:(e,t,r)=>{"use strict";var s=r(18999);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},42355:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},51154:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},58959:(e,t,r)=>{Promise.resolve().then(r.bind(r,92431))},92431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(95155),a=r(12115),i=r(35695),n=r(79783),l=r(12638),c=r(30500),d=r(66695),o=r(26126),u=r(51154),v=r(49699),h=r(15080);function x(){let e=(0,i.useParams)().id,{fetchEvaluation:t,updateEvaluation:r,loading:h,error:x}=(0,v.w)(),[m,f]=(0,a.useState)(null),[p,g]=(0,a.useState)(!0),[j,b]=(0,a.useState)("");(0,a.useEffect)(()=>{let r=async()=>{try{g(!0),b("");let r=await t(e);f(r)}catch(e){b("Error fetching evaluation")}finally{g(!1)}};e&&r()},[e,t]);let E=async(t,s)=>{try{await r(e,{answers:t,comments:s,status:"submitted"}),f(e=>e?{...e,answers:t,comments:s,status:"submitted"}:null)}catch(e){b("Error submitting evaluation")}};return p?(0,s.jsx)(n.A,{allowedRoles:["TEACHER"],children:(0,s.jsx)(l.A,{title:"Teacher Evaluation",children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.A,{className:"h-6 w-6 animate-spin"}),(0,s.jsx)("span",{children:"Loading evaluation..."})]})})})}):x?(0,s.jsx)(n.A,{allowedRoles:["TEACHER"],children:(0,s.jsx)(l.A,{title:"Teacher Evaluation",children:(0,s.jsx)(d.Zp,{className:"border-destructive",children:(0,s.jsx)(d.Wu,{className:"pt-6",children:(0,s.jsx)("div",{className:"text-destructive text-sm",children:x})})})})}):m?(0,s.jsx)(n.A,{allowedRoles:["TEACHER"],children:(0,s.jsx)(l.A,{title:"Teacher Evaluation",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(d.Zp,{children:(0,s.jsx)(d.aR,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d.ZB,{children:"Evaluation Form"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Term: ",m.term," â€¢ Created: ",new Date(m.createdAt).toLocaleDateString()]})]}),(0,s.jsx)(o.E,{variant:"submitted"===m.status?"default":"completed"===m.status?"secondary":"outline",children:m.status.charAt(0).toUpperCase()+m.status.slice(1)})]})})}),(0,s.jsx)(c.A,{term:"START"===m.term?"START":"END",onSubmit:(e,t)=>E(Object.fromEntries(e.map(e=>[e.questionId,e.answer])),t),onCancel:()=>{},loading:!1})]})})}):(0,s.jsx)(n.A,{allowedRoles:["TEACHER"],children:(0,s.jsx)(l.A,{title:"Teacher Evaluation",children:(0,s.jsx)(d.Zp,{children:(0,s.jsx)(d.Wu,{className:"pt-6",children:(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Evaluation not found"})})})})})})}function m(){return(0,s.jsx)(h.PageErrorBoundary,{pageName:"Evaluation Page",children:(0,s.jsx)(x,{})})}}},e=>{e.O(0,[6169,2108,699,6671,8892,704,8441,5964,7358],()=>e(e.s=58959)),_N_E=e.O()}]);