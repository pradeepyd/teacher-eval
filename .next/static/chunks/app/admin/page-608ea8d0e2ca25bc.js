(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{5040:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},17580:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},26126:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var a=s(95155);s(12115);var r=s(99708),n=s(74466),i=s(59434);let l=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,asChild:n=!1,...o}=e,d=n?r.DX:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,i.cn)(l({variant:s}),t),...o})}},35695:(e,t,s)=>{"use strict";var a=s(18999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},42355:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},51154:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},67701:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>E});var a=s(95155),r=s(12108),n=s(79783),i=s(12638),l=s(15080),o=s(88489),d=s(6874),c=s.n(d),u=s(66695),m=s(30285),h=s(26126),p=s(51154),x=s(17580),v=s(19946);let f=(0,v.A)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var g=s(69074),y=s(72713);let j=(0,v.A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),w=(0,v.A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var N=s(5040),b=s(91462);function A(){let{data:e,status:t}=(0,r.useSession)(),{stats:s={totalUsers:0,totalTeachers:0,totalDepartments:0,activeEvaluations:0,completedReviews:0,pendingReviews:0},departments:l=[],activities:d=[],loading:v=!1}=(0,b.f)(),A=(0,o.jX)(l).map(e=>(0,o.se)(e)),E=(0,o.jX)(d).map(e=>(0,o.zX)(e)),T={totalUsers:(0,o.Ju)(s.totalUsers),totalTeachers:(0,o.Ju)(s.totalTeachers),totalDepartments:(0,o.Ju)(s.totalDepartments),activeEvaluations:(0,o.Ju)(s.activeEvaluations),completedReviews:(0,o.Ju)(s.completedReviews),pendingReviews:(0,o.Ju)(s.pendingReviews)};return"loading"===t?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(p.A,{className:"w-8 h-8 animate-spin"})}):(null==e?void 0:e.user)?v?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,a.jsx)(n.A,{allowedRoles:["ADMIN"],children:(0,a.jsx)(i.A,{title:"Admin Dashboard",showBack:!1,children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(u.Zp,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer group",children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-sm font-medium",children:"User Management"}),(0,a.jsx)(x.A,{className:"h-5 w-5 text-blue-600 group-hover:scale-110 transition-transform"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:T.totalUsers}),(0,a.jsx)(u.BT,{children:"Total system users"}),(0,a.jsx)(c(),{href:"/admin/users",children:(0,a.jsx)(m.$,{variant:"outline",size:"sm",className:"mt-3 w-full",children:"Manage Users"})})]})]}),(0,a.jsxs)(u.Zp,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer group",children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-sm font-medium",children:"Departments"}),(0,a.jsx)(f,{className:"h-5 w-5 text-green-600 group-hover:scale-110 transition-transform"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:T.totalDepartments}),(0,a.jsx)(u.BT,{children:"Active departments"}),(0,a.jsx)(c(),{href:"/admin/departments",children:(0,a.jsx)(m.$,{variant:"outline",size:"sm",className:"mt-3 w-full",children:"Manage Departments"})})]})]}),(0,a.jsxs)(u.Zp,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer group",children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-sm font-medium",children:"Term Management"}),(0,a.jsx)(g.A,{className:"h-5 w-5 text-orange-600 group-hover:scale-110 transition-transform"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:A.filter(e=>{var t;return null==(t=e.termStates)?void 0:t.some(e=>"START"===e.activeTerm)}).length}),(0,a.jsx)(u.BT,{children:"Active terms"}),(0,a.jsx)(c(),{href:"/admin/term-management",children:(0,a.jsx)(m.$,{variant:"outline",size:"sm",className:"mt-3 w-full",children:"Manage Terms"})})]})]}),(0,a.jsxs)(u.Zp,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer group",children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-sm font-medium",children:"Analytics"}),(0,a.jsx)(y.A,{className:"h-5 w-5 text-purple-600 group-hover:scale-110 transition-transform"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:T.completedReviews}),(0,a.jsx)(u.BT,{children:"Completed reviews"}),(0,a.jsx)(c(),{href:"/reports",children:(0,a.jsx)(m.$,{variant:"outline",size:"sm",className:"mt-3 w-full",children:"View Reports"})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-base font-semibold",children:"System Overview"}),(0,a.jsx)(j,{className:"h-5 w-5 text-muted-foreground"})]}),(0,a.jsxs)(u.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total Users"}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:T.totalUsers})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Teachers"}),(0,a.jsx)(h.E,{variant:"secondary",children:T.totalTeachers})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Departments"}),(0,a.jsx)(h.E,{variant:"outline",children:T.totalDepartments})]})]})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-base font-semibold",children:"Evaluation Progress"}),(0,a.jsx)(w,{className:"h-5 w-5 text-muted-foreground"})]}),(0,a.jsxs)(u.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Active Evaluations"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-blue-600",children:T.activeEvaluations})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Completed"}),(0,a.jsx)(h.E,{className:"bg-green-100 text-green-800",children:T.completedReviews})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Pending"}),(0,a.jsx)(h.E,{variant:"destructive",children:T.pendingReviews})]})]})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-base font-semibold",children:"Term Status"}),(0,a.jsx)(N.A,{className:"h-5 w-5 text-muted-foreground"})]}),(0,a.jsxs)(u.Wu,{className:"space-y-3",children:[A.slice(0,4).map(e=>{var t,s;let r=null==(s=e.termStates)||null==(t=s.find(e=>"START"===e.activeTerm))?void 0:t.activeTerm;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground truncate",children:e.name}),(0,a.jsx)(h.E,{variant:r?"default":"secondary",className:r?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800",children:r||"No Term"})]},e.id)}),A.length>4&&(0,a.jsx)("div",{className:"text-center pt-2",children:(0,a.jsx)(c(),{href:"/admin/term-management",children:(0,a.jsxs)(m.$,{variant:"ghost",size:"sm",children:["View All (",A.length,")"]})})})]})]})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsxs)(u.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(j,{className:"h-5 w-5"}),"Recent Activities"]}),(0,a.jsx)(u.BT,{children:"Latest system activities and updates"})]}),(0,a.jsx)(u.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:E.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[e.department&&(0,a.jsx)(h.E,{variant:"outline",className:"text-xs",children:e.department}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleDateString()})]})]})]},e.id))})})]})]})})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Please log in to access the admin dashboard."}),(0,a.jsx)(p.A,{className:"w-8 h-8 animate-spin mx-auto"})]})})}function E(){return(0,a.jsx)(l.PageErrorBoundary,{pageName:"Admin Dashboard",children:(0,a.jsx)(l.r0,{dataType:"admin dashboard data",children:(0,a.jsx)(A,{})})})}},69074:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},72713:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},88489:(e,t,s)=>{"use strict";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?e:t}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"string"==typeof e?e:t}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=Number(e);return!isNaN(s)&&isFinite(s)?s:t}function i(e,t,s){if(!e||"object"!=typeof e)return s;let a={...s};for(let[s,r]of Object.entries(t))if(s in e){let t=e[s];"string"==typeof r&&"string"==typeof t||"number"==typeof r&&"number"==typeof t||"boolean"==typeof r&&"boolean"==typeof t||Array.isArray(r)&&Array.isArray(t)?a[s]=t:r&&"object"==typeof r&&t&&"object"==typeof t&&(a[s]=t)}return a}function l(e){var t,s;return{id:r(null==e?void 0:e.id)||"",name:r(null==e?void 0:e.name)||"Unknown User",email:r(null==e?void 0:e.email)||"",role:r(null==e?void 0:e.role)||"TEACHER",department:(null==e?void 0:e.department)?{id:r(null==(t=e.department)?void 0:t.id),name:r(null==(s=e.department)?void 0:s.name)}:null}}function o(e){var t,s,l;return{id:r(null==e?void 0:e.id)||"",name:r(null==e?void 0:e.name)||"Unknown Department",createdAt:r(null==e?void 0:e.createdAt)||new Date().toISOString(),updatedAt:r(null==e?void 0:e.updatedAt)||new Date().toISOString(),hod:(null==e?void 0:e.hod)?{id:r(null==(t=e.hod)?void 0:t.id),name:r(null==(s=e.hod)?void 0:s.name)}:void 0,termStates:a(null==e?void 0:e.termStates).map(e=>i(e,{activeTerm:"START",startTermVisibility:"",endTermVisibility:""},{activeTerm:"START",startTermVisibility:"HIDDEN",endTermVisibility:"HIDDEN"})),_count:{users:n(null==e||null==(l=e._count)?void 0:l.users)||0}}}function d(e){return i(e,{id:"",type:"",message:"",department:null,timestamp:""},{id:"",type:"UNKNOWN",message:"Unknown activity",department:null,timestamp:new Date().toISOString()})}s.d(t,{Ju:()=>n,NV:()=>l,jX:()=>a,nr:()=>r,se:()=>o,zX:()=>d})},91462:(e,t,s)=>{"use strict";s.d(t,{f:()=>d});var a=s(12115),r=s(12108);class n{static createError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"An unexpected error occurred";if(e instanceof TypeError&&e.message.includes("fetch"))return{message:"Network error. Please check your connection and try again.",code:"NETWORK_ERROR",status:0};if(e instanceof Response)return{message:"Server error (".concat(e.status,"). Please try again later."),code:"HTTP_ERROR",status:e.status};if(e&&"object"==typeof e){if(e.message)return{message:String(e.message),code:e.code,status:e.status,details:e.details};if(e.error)return{message:String(e.error),code:e.code,status:e.status}}return"string"==typeof e?{message:e,code:"UNKNOWN_ERROR"}:{message:t,code:"UNKNOWN_ERROR"}}static async handleResponse(e){try{if(!e.ok){let t="HTTP ".concat(e.status),s=null;try{let a=await e.json();t=a.error||a.message||t,s=a.details||a}catch(s){t=e.statusText||t}throw this.createError({message:t,status:e.status,details:s})}return await e.json()}catch(e){if(e&&"object"==typeof e&&"message"in e&&"code"in e)throw e;throw this.createError(e,"Failed to process server response")}}static logError(e,t){t?"[".concat(t,"] ").concat(e.message):e.message}static getUserFriendlyMessage(e){switch(e.code){case"NETWORK_ERROR":return"Unable to connect. Please check your internet connection.";case"HTTP_ERROR":if(401===e.status)return"Please log in to continue.";if(403===e.status)return"You do not have permission to perform this action.";if(404===e.status)return"The requested resource was not found.";if(500===e.status)return"Server error. Please try again later.";return"Something went wrong. Please try again.";case"VALIDATION_ERROR":return e.message;default:if(e.message&&e.message.length<100&&!e.message.includes("Error:"))return e.message;return"Something went wrong. Please try again."}}}async function i(e,t){try{let t=await e();return await n.handleResponse(t)}catch(s){let e=n.createError(s);throw n.logError(e,t),e}}async function l(e,t,s){return i(()=>fetch(e,t),s||"API call to ".concat(e))}let o={users:null,departments:null,stats:null,activities:null,isLoading:!1,hasData:!1};function d(){let{data:e,status:t}=(0,r.useSession)(),[s,i]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null),u=(0,a.useCallback)(async()=>{if(!o.isLoading&&!o.hasData){o.isLoading=!0,i(!0),c(null);try{var e,t,s;let a,[r,n,i]=await Promise.all([l("/api/admin/users",void 0,"Admin: fetch users"),l("/api/departments",void 0,"Admin: fetch departments"),l("/api/admin/activity",void 0,"Admin: fetch activities")]),d=Array.isArray(null==r||null==(e=r.data)?void 0:e.users)?r.data.users:[],c=Array.isArray(null==n||null==(t=n.data)?void 0:t.departments)?n.data.departments.map(e=>{var t;return{...e,termStates:e.termStates||[],_count:{users:(null==(t=e._count)?void 0:t.users)||0}}}):[],u=Array.isArray(null==i||null==(s=i.data)?void 0:s.activities)?i.data.activities:[];try{let e=await l("/api/admin/stats",void 0,"Admin: fetch stats");console.log("Admin stats response:",e),a=(null==e?void 0:e.stats)||{totalUsers:d.length,totalTeachers:d.filter(e=>"TEACHER"===e.role).length,totalDepartments:c.length,activeEvaluations:0,completedReviews:0,pendingReviews:0}}catch(e){console.error("Failed to fetch admin stats, using fallback:",e),a={totalUsers:d.length,totalTeachers:d.filter(e=>"TEACHER"===e.role).length,totalDepartments:c.length,activeEvaluations:0,completedReviews:0,pendingReviews:0}}o={users:d,departments:c,stats:a,activities:u,isLoading:!1,hasData:!0}}catch(t){let e=n.createError(t,"Failed to load admin dashboard data");c(n.getUserFriendlyMessage(e)),o.isLoading=!1,o.users=[],o.departments=[],o.stats={totalUsers:0,totalTeachers:0,totalDepartments:0,activeEvaluations:0,completedReviews:0,pendingReviews:0},o.activities=[]}finally{i(!1)}}},[]),m=(0,a.useCallback)(()=>{o.hasData=!1,o.users=null,o.departments=null,o.stats=null,o.activities=null},[]),h=(0,a.useCallback)(()=>{m(),u()},[u,m]);(0,a.useEffect)(()=>{var s;"authenticated"!==t||(null==e||null==(s=e.user)?void 0:s.role)!=="ADMIN"||o.hasData||u()},[t,e,u]),(0,a.useEffect)(()=>{"unauthenticated"===t&&m()},[t,m]);let p=Array.isArray(o.users)?o.users:[],x=Array.isArray(o.departments)?o.departments.map(e=>{var t;return{...e,termStates:e.termStates||[],_count:{users:(null==(t=e._count)?void 0:t.users)||0}}}):[];return{users:p,departments:x,stats:o.stats||{totalUsers:0,totalTeachers:0,totalDepartments:0,activeEvaluations:0,completedReviews:0,pendingReviews:0},activities:Array.isArray(o.activities)?o.activities:[],loading:s||o.isLoading,error:d,refetch:h,invalidateCache:m,createUser:async e=>{try{return await l("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},"Admin: create user")}catch(e){throw n.createError(e,"Failed to create user")}},updateUser:async(e,t)=>{try{let s=await fetch("/api/admin/users/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to update user");return await s.json()}catch(e){throw n.createError(e,"Failed to update user")}},deleteUser:async e=>{try{let t=await fetch("/api/admin/users/".concat(e),{method:"DELETE"});if(!t.ok)throw Error("Failed to delete user");await t.json()}catch(e){throw n.createError(e,"Failed to delete user")}},createDepartment:async e=>{try{let t=await fetch("/api/departments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create department");return await t.json()}catch(e){throw n.createError(e,"Failed to create department")}},updateDepartment:async(e,t)=>{try{let s=await fetch("/api/departments/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to update department");return await s.json()}catch(e){throw n.createError(e,"Failed to update department")}},deleteDepartment:async e=>{try{let t=await fetch("/api/departments/".concat(e),{method:"DELETE"});if(!t.ok)throw Error("Failed to delete department");await t.json()}catch(e){throw n.createError(e,"Failed to delete department")}},assignHod:async(e,t)=>{try{let s=await fetch("/api/departments/".concat(e,"/assign-hod"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hodId:t})});if(!s.ok)throw Error("Failed to assign HOD");await s.json()}catch(e){throw n.createError(e,"Failed to assign HOD")}},assignTeachers:async(e,t)=>{try{let s=await fetch("/api/departments/assign-teachers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({departmentId:e,teacherIds:t})});if(!s.ok)throw Error("Failed to assign teachers");await s.json()}catch(e){throw n.createError(e,"Failed to assign teachers")}}}}},99375:(e,t,s)=>{Promise.resolve().then(s.bind(s,67701))}},e=>{e.O(0,[6169,2108,699,8892,8441,5964,7358],()=>e(e.s=99375)),_N_E=e.O()}]);