(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6090],{18393:(e,r,s)=>{Promise.resolve().then(s.bind(s,32220))},32220:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>l});var t=s(95155),a=s(12115),d=s(35695),i=s(79783),o=s(12638),n=s(91839);function l(e){let{params:r}=e,[s,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[h,v]=(0,a.useState)(""),b=(0,d.useRouter)(),{teacherId:m,term:p}=r,w=async e=>{l(!0),u(""),v("");try{let r=await fetch("/api/reviews/hod",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacherId:m,term:p,comment:e.comments,score:e.overallRating,...e})});if(r.ok){let r=e.submitted?"Review submitted successfully!":"Review saved as draft!";v(r),e.submitted&&setTimeout(()=>{b.push("/dashboard/hod/reviews")},2e3)}else{let e=await r.json();u(e.error||"Failed to save review")}}catch(e){u("Error saving review")}finally{l(!1)}};return(0,t.jsx)(i.A,{allowedRoles:["HOD"],children:(0,t.jsx)(o.A,{title:"HOD Review - ".concat(p," Term"),children:(0,t.jsxs)("div",{className:"space-y-6",children:[c&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:c}),h&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:h}),(0,t.jsx)(n.A,{teacherId:m,term:p,reviewerRole:"HOD",onSubmit:w,onCancel:()=>{b.push("/dashboard/hod/reviews")},loading:s})]})})})}}},e=>{e.O(0,[6169,2108,699,6671,8892,5355,8441,5964,7358],()=>e(e.s=18393)),_N_E=e.O()}]);