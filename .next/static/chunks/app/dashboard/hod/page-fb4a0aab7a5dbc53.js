(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9773],{10549:(e,t,s)=>{"use strict";s.d(t,{$m:()=>o,As:()=>d,nD:()=>l,ub:()=>c});var a=s(95155);s(12115);var n=s(23478),i=s(66474),r=s(59434);function l(e){let{...t}=e;return(0,a.jsx)(n.bL,{"data-slot":"accordion",...t})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(n.q7,{"data-slot":"accordion-item",className:(0,r.cn)("border-b last:border-b-0",t),...s})}function o(e){let{className:t,children:s,...l}=e;return(0,a.jsx)(n.Y9,{className:"flex",children:(0,a.jsxs)(n.l9,{"data-slot":"accordion-trigger",className:(0,r.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t),...l,children:[s,(0,a.jsx)(i.A,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function c(e){let{className:t,children:s,...i}=e;return(0,a.jsx)(n.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...i,children:(0,a.jsx)("div",{className:(0,r.cn)("pt-0 pb-4",t),children:s})})}},17313:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>d,av:()=>o,j7:()=>l,tU:()=>r});var a=s(95155);s(12115);var n=s(30064),i=s(59434);function r(e){let{className:t,...s}=e;return(0,a.jsx)(n.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)(n.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(n.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)(n.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",t),...s})}},23119:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>z});var a=s(95155),n=s(12115),i=s(12108),r=s(79783),l=s(12638),d=s(17313),o=s(66695),c=s(63655),m="horizontal",u=["horizontal","vertical"],x=n.forwardRef((e,t)=>{var s;let{decorative:n,orientation:i=m,...r}=e,l=(s=i,u.includes(s))?i:m;return(0,a.jsx)(c.sG.div,{"data-orientation":l,...n?{role:"none"}:{"aria-orientation":"vertical"===l?l:void 0,role:"separator"},...r,ref:t})});x.displayName="Separator";var h=s(59434);function v(e){let{className:t,orientation:s="horizontal",decorative:n=!0,...i}=e;return(0,a.jsx)(x,{"data-slot":"separator",decorative:n,orientation:s,className:(0,h.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...i})}var p=s(62523),j=s(88539),f=s(30285),b=s(26126),g=s(59409),y=s(10549),N=s(28857),w=s(55365),S=s(37349),E=s(51154),C=s(84616),T=s(62525),D=s(47863),k=s(66474),A=s(19946);let R=(0,A.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),O=(0,A.A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var P=s(57434),q=s(91788),F=s(88489),I=s(15080);function M(){var e,t,c;let{data:m,status:u}=(0,i.useSession)(),[x,h]=(0,n.useState)("questions"),[A,I]=(0,n.useState)([]),[M,z]=(0,n.useState)([]),[H,V]=(0,n.useState)(!1),[W,B]=(0,n.useState)(!1),[Z,Q]=(0,n.useState)(!1),[_,L]=(0,n.useState)(!1),[X,U]=(0,n.useState)(null),[$,Y]=(0,n.useState)(null),[G,J]=(0,n.useState)(!1),[K,ee]=(0,n.useState)(!1),[et,es]=(0,n.useState)(null),[ea,en]=(0,n.useState)(null),[ei,er]=(0,n.useState)(!0),[el,ed]=(0,n.useState)("DRAFT"),[eo,ec]=(0,n.useState)(!1),[em,eu]=(0,n.useState)(null),[ex,eh]=(0,n.useState)({}),[ev,ep]=(0,n.useState)({question:"",type:"TEXT",options:[""],optionScores:[0],required:!1}),ej=(0,F.jX)(A),ef=(0,F.jX)(M),eb=(0,n.useCallback)(async()=>{var e;let t=null==m||null==(e=m.user)?void 0:e.departmentId;if(t)try{er(!0),new Date().getFullYear();let e=await fetch("/api/departments/".concat(t,"/term-state"));if(e.ok){let s=await e.json(),a=s.data||s,n=a.activeTerm||null;a.year,en(n),eh({[t]:a});let i="DRAFT";i="START"===n?a.startTermVisibility||"DRAFT":"END"===n&&a.endTermVisibility||"DRAFT",ed(i),n&&!et&&es(n)}}catch(e){console.error("Error fetching department active term:",e)}finally{er(!1)}},[m]),eg=(0,n.useCallback)(async()=>{try{var e,t;let s=null==m||null==(e=m.user)?void 0:e.departmentId,a=et?"?term=".concat(et,"&departmentId=").concat(s):"?departmentId=".concat(s),n=await fetch("/api/questions".concat(a));if(!n.ok)throw Error("Failed to fetch questions");let i=await n.json();I((null==(t=i.data)?void 0:t.questions)||[])}catch(e){console.error("Error fetching questions:",e),U("Failed to load questions")}},[et,m]),ey=(0,n.useCallback)(async()=>{try{let e=await fetch("/api/reviews/hod/teacher-data");if(!e.ok)throw Error("Failed to fetch teachers");let t=await e.json(),s=await Promise.all((t.teachers||[]).map(async e=>{try{let r=await fetch("/api/reviews/hod/teacher-data?teacherId=".concat(e.id,"&term=").concat(et||"START"));if(r.ok){var t,s,a,n,i;let l=await r.json(),d=(null==(s=l.existingReview)||null==(t=s.scores)?void 0:t.overallRating)||0,o=(null==(n=l.existingReview)||null==(a=n.scores)?void 0:a.rubric)||{},c=(null==(i=l.existingReview)?void 0:i.comments)||"";return{...e,hodScore:d,rubric:o,hodComment:c,answers:{},selfComment:l.selfComment||""}}return e}catch(t){return console.error("Failed to fetch evaluation data for teacher ".concat(e.id,":"),t),e}}));z(s),(!t.teachers||0===t.teachers.length)&&t.message&&U(t.message)}catch(e){U("Failed to load teachers")}},[et]);(0,n.useEffect)(()=>{et&&(null==m?void 0:m.user)&&eg()},[et,m,eg]);let eN=(0,n.useCallback)(async()=>{if(ev.question.trim()){if(!et)return void U("No active term set for your department");B(!0),U(null);try{let e={question:ev.question.trim(),type:ev.type,term:et,year:new Date().getFullYear(),options:"MCQ"===ev.type||"CHECKBOX"===ev.type?ev.options.filter(e=>e.trim()):[],optionScores:"MCQ"===ev.type||"CHECKBOX"===ev.type?ev.optionScores.slice(0,ev.options.length):[],required:ev.required},t=await fetch("/api/questions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to add question")}await t.json(),Y("Question added successfully!"),ep({question:"",type:"TEXT",options:[""],optionScores:[0],required:!1}),await eg()}catch(e){U(e instanceof Error?e.message:"Failed to add question")}finally{B(!1)}}},[ev,et,m,eg]),ew=(0,n.useCallback)(async e=>{B(!0),U(null);try{let t=await fetch("/api/questions/".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete question")}await t.json(),Y("Question deleted successfully!"),await eg()}catch(e){U(e instanceof Error?e.message:"Failed to delete question")}finally{B(!1)}},[eg]),eS=(0,n.useCallback)((e,t,s)=>{z(M.map(a=>a.id===e?{...a,[t]:s}:a))},[M]),eE=(0,n.useCallback)(async e=>{let t=M.find(t=>t.id===e);if(t){if(!et)return void U("No active term set for your department");if(t.hodScore<1||t.hodScore>10)return void U("Score must be between 1-10");L(!0),U(null);try{let s=await fetch("/api/reviews/hod",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacherId:e,comment:t.hodComment,score:t.hodScore,scores:t.rubric||{},term:et})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to submit evaluation")}Y("Evaluation submitted successfully!"),z(M.map(t=>t.id===e?{...t,status:"REVIEWED",canReview:!1}:t)),eu(null)}catch(e){U(e instanceof Error?e.message:"Failed to submit evaluation")}finally{L(!1)}}},[M,et]),eC=(0,n.useCallback)(async e=>{V(!0),U(null),Y(null);try{var t,a,n;let i=await fetch("/api/reviews/hod/evaluation-report?term=".concat(e));if(!i.ok){let e=await i.text();throw Error("Failed to fetch evaluation data: ".concat(i.status," ").concat(e))}let r=await i.json(),{jsPDF:l}=await Promise.all([s.e(3930),s.e(913)]).then(s.bind(s,26597)),d=new l("p","mm","a4");d.setFontSize(20),d.text("HOD Performance Evaluation Report",105,20,{align:"center"}),d.setFontSize(12),d.text("".concat(e," Term ").concat(new Date().getFullYear()),105,30,{align:"center"}),d.setFontSize(14),d.text("HOD Information",20,50),d.setFontSize(10),d.text("Name: ".concat((null==m||null==(t=m.user)?void 0:t.name)||"N/A"),20,60),d.text("Department: ".concat((null==m||null==(a=m.user)?void 0:a.departmentName)||"N/A"),20,70),d.text("Term: ".concat(e),20,80);let o=100;(r.asstDeanComment||r.asstDeanScore)&&(d.setFontSize(14),d.text("Assistant Dean Evaluation",20,o),d.setFontSize(10),o+=10,r.asstDeanComment&&(d.text("Comments: ".concat(r.asstDeanComment),20,o),o+=10),null!==r.asstDeanScore&&void 0!==r.asstDeanScore&&(d.text("Score: ".concat(r.asstDeanScore,"%"),20,o),o+=10)),(r.deanComment||r.deanScore||void 0!==r.promoted)&&(d.setFontSize(14),d.text("Dean Final Review",20,o),d.setFontSize(10),o+=10,r.deanComment&&(d.text("Comments: ".concat(r.deanComment),20,o),o+=10),null!==r.deanScore&&void 0!==r.deanScore&&(d.text("Final Score: ".concat(r.deanScore,"%"),20,o),o+=10),void 0!==r.promoted&&d.text("Promotion Status: ".concat(r.promoted?"PROMOTED":"NOT PROMOTED"),20,o));let c="".concat((null==m||null==(n=m.user)?void 0:n.name)||"HOD","_").concat(e,"_").concat(new Date().getFullYear(),"_Evaluation.pdf");d.save(c),Y("Evaluation report downloaded successfully!")}catch(e){U("Failed to download evaluation report")}finally{V(!1)}},[m]);(0,n.useEffect)(()=>{(null==m?void 0:m.user)&&eb()},[null==m?void 0:m.user,eb]),(0,n.useEffect)(()=>{(null==m?void 0:m.user)&&ey()},[null==m?void 0:m.user,ey]);let eT=(0,n.useCallback)(async()=>{try{let e=await fetch("/api/reviews/hod/evaluation-report?term=START");if(e.ok){let t=await e.json();J(!!(t.asstDeanComment||t.deanComment))}let t=await fetch("/api/reviews/hod/evaluation-report?term=END");if(t.ok){let e=await t.json();ee(!!(e.asstDeanComment||e.deanComment))}}catch(e){}},[]);(0,n.useEffect)(()=>{var e;(null==m||null==(e=m.user)?void 0:e.id)&&eT()},[null==m||null==(e=m.user)?void 0:e.id,eT]);let eD=(0,n.useCallback)(e=>{switch(e){case"NOT_STARTED":return"destructive";case"IN_PROGRESS":default:return"secondary";case"SUBMITTED":case"REVIEWED":return"default"}},[]),ek=(0,n.useCallback)(e=>{switch(e){case"NOT_STARTED":return"Not Started";case"IN_PROGRESS":return"In Progress";case"SUBMITTED":return"Submitted";case"REVIEWED":return"Reviewed";default:return e}},[]);return"loading"===u?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(E.A,{className:"w-8 h-8 animate-spin"})}):(null==m?void 0:m.user)?H||ei?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,a.jsx)(r.A,{allowedRoles:["HOD"],children:(0,a.jsxs)(l.A,{title:"Head of Department Dashboard",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(o.Zp,{className:"bg-gradient-to-r from-green-50 to-emerald-100",children:(0,a.jsx)(o.Wu,{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:["Welcome, ",m.user.name,"!"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Department: ",(null==(t=m.user)?void 0:t.departmentName)||"N/A"]})]}),ei?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(E.A,{className:"w-4 h-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Loading term..."})]}):ea?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{var e;let t=ex[null==m||null==(e=m.user)?void 0:e.departmentId];return("START"===ea?(null==t?void 0:t.startTermVisibility)==="COMPLETE":(null==t?void 0:t.endTermVisibility)==="COMPLETE")?(0,a.jsxs)(b.E,{className:"bg-purple-100 text-purple-800",children:["Term Completed: ",ea," ",new Date().getFullYear()]}):(0,a.jsxs)(b.E,{className:"bg-blue-100 text-blue-800",children:["Active Term: ",ea," ",new Date().getFullYear()]})})(),(0,a.jsx)(f.$,{variant:"outline",size:"sm",onClick:()=>{eb()},className:"ml-2",children:"Refresh"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(b.E,{variant:"destructive",children:["No Active Term Set for ",new Date().getFullYear()]}),(0,a.jsx)(f.$,{variant:"outline",size:"sm",onClick:()=>{eb()},className:"ml-2",children:"Refresh"})]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-gray-600",children:["Department: ",(null==m||null==(c=m.user)?void 0:c.departmentName)||"â€”"]})}),(0,a.jsx)(b.E,{variant:"outline",className:"text-base",children:"Head of Department"})]})})})}),X&&(0,a.jsx)(w.Fc,{className:"mb-4 border-red-200 bg-red-50",children:(0,a.jsx)(w.TN,{className:"text-red-800",children:X})}),$&&(0,a.jsx)(w.Fc,{className:"mb-4 border-green-200 bg-green-50",children:(0,a.jsx)(w.TN,{className:"text-green-800",children:$})}),(0,a.jsxs)(d.tU,{value:x,onValueChange:h,className:"space-y-6",children:[(0,a.jsxs)(d.j7,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(d.Xi,{value:"questions",children:"Question Management"}),(0,a.jsx)(d.Xi,{value:"evaluate",children:"Evaluate Teachers"}),(0,a.jsx)(d.Xi,{value:"summary",children:"Summary"}),(0,a.jsx)(d.Xi,{value:"my-evaluation",children:"My Evaluation"})]}),(0,a.jsx)(d.av,{value:"questions",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{children:[(0,a.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(C.A,{className:"h-5 w-5"}),"Add New Question"]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(f.$,{variant:"outline",size:"sm",onClick:async()=>{try{V(!0);let e=await fetch("/api/questions/template/rubric",{method:"POST"}),t=await e.json().catch(()=>({}));if(!e.ok)throw Error(t.error||"Failed to insert rubric");Y(t.message||"Rubric inserted"),await eg()}catch(e){U(e instanceof Error?e.message:"Failed to insert rubric")}finally{V(!1)}},disabled:W||!et,children:"Insert Rubric Template"})})]}),(0,a.jsxs)(o.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Question Text ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(j.T,{value:ev.question,onChange:e=>ep({...ev,question:e.target.value}),placeholder:"Enter your evaluation question...",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Answer Type ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)(g.l6,{value:ev.type,onValueChange:e=>ep({...ev,type:e}),children:[(0,a.jsx)(g.bq,{children:(0,a.jsx)(g.yv,{placeholder:"Select answer type..."})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"TEXT",children:"Short Text"}),(0,a.jsx)(g.eb,{value:"TEXTAREA",children:"Long Text"}),(0,a.jsx)(g.eb,{value:"MCQ",children:"MCQ (Single Choice)"}),(0,a.jsx)(g.eb,{value:"CHECKBOX",children:"Checkbox (Multiple Choice)"})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Choose the answer format for this question"})]}),("MCQ"===ev.type||"CHECKBOX"===ev.type)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Options and Weights"}),ev.options.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex gap-2 mb-2 items-center",children:[(0,a.jsx)(p.p,{value:e,onChange:e=>{let s=[...ev.options];s[t]=e.target.value,ep({...ev,options:s})},placeholder:"Option ".concat(t+1),className:"flex-1"}),(0,a.jsx)(p.p,{type:"number",value:null!=(s=ev.optionScores[t])?s:0,onChange:e=>{let s=[...ev.optionScores];s[t]=parseInt(e.target.value)||0,ep({...ev,optionScores:s})},className:"w-24",placeholder:"Weight"}),ev.options.length>1&&(0,a.jsx)(f.$,{variant:"outline",size:"sm",onClick:()=>{let e=ev.options.filter((e,s)=>s!==t),s=ev.optionScores.filter((e,s)=>s!==t);ep({...ev,options:e,optionScores:s})},children:(0,a.jsx)(T.A,{className:"h-4 w-4"})})]},t)}),(0,a.jsxs)(f.$,{variant:"outline",size:"sm",onClick:()=>ep({...ev,options:[...ev.options,""],optionScores:[...ev.optionScores,0]}),children:[(0,a.jsx)(C.A,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),(0,a.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,a.jsxs)(f.$,{onClick:eN,disabled:W,children:[W?(0,a.jsx)(E.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Add Question"]})})]})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)(o.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Questions List"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[A.length," questions"]})]})}),(0,a.jsx)(o.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[ej.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start justify-between rounded-md border p-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsxs)("span",{className:"font-medium",children:["Question ",t+1]}),(0,a.jsx)(b.E,{variant:"outline",children:e.type}),"boolean"==typeof e.isActive&&!e.isActive&&(0,a.jsx)(b.E,{variant:"destructive",children:"Disabled"}),e.required&&(0,a.jsx)(b.E,{variant:"destructive",children:"Required"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-700",children:e.question})]}),(0,a.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>ew(e.id),disabled:W,"aria-label":"Delete question",children:(0,a.jsx)(T.A,{className:"h-4 w-4"})})]},e.id)),0===ej.length&&(0,a.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"No questions added yet. Create your first question above."})]})})]})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(o.ZB,{children:"Live Preview"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs",children:"Term"}),(0,a.jsxs)(g.l6,{value:et||void 0,onValueChange:e=>es(e),children:[(0,a.jsx)(g.bq,{className:"h-8 w-[110px]",children:(0,a.jsx)(g.yv,{placeholder:"Select"})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"START",children:"START"}),(0,a.jsx)(g.eb,{value:"END",children:"END"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-xs rounded-full px-2 px-1 border",children:["Visibility: ",(0,a.jsx)("span",{className:"PUBLISHED"===el?"text-green-700":"COMPLETE"===el?"text-red-700":"text-yellow-700",children:el})]}),(0,a.jsx)(f.$,{variant:"outline",size:"sm",className:"border-gray-300 text-gray-700 hover:bg-gray-100",onClick:async()=>{await eb()},children:"Refresh"}),"COMPLETE"===el&&(0,a.jsx)("span",{className:"text-xs text-red-600 font-medium",children:"Term completed by Dean - cannot publish"}),(0,a.jsxs)(S.Lt,{open:eo,onOpenChange:ec,children:[(0,a.jsx)(S.tv,{asChild:!0,children:(0,a.jsx)(f.$,{size:"sm",disabled:!et||"PUBLISHED"===el||"COMPLETE"===el||0===ej.length||Z,className:"bg-blue-600 hover:bg-blue-700 text-white",children:Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.A,{className:"h-4 w-4 animate-spin mr-2"}),"Publishing..."]}):"Publish"})}),(0,a.jsxs)(S.EO,{children:[(0,a.jsxs)(S.wd,{children:[(0,a.jsx)(S.r7,{children:"Publish questions for this term?"}),(0,a.jsx)(S.$v,{children:"Publishing makes the form visible to all teachers in your department for the current term. This action can be done only once per term and cannot be undone."})]}),(0,a.jsxs)(S.ck,{children:[(0,a.jsx)(S.Zr,{disabled:H,children:"Cancel"}),(0,a.jsx)(S.Rx,{disabled:Z,onClick:async()=>{var e;let t=null==m||null==(e=m.user)?void 0:e.departmentId;if(t&&et){Q(!0),U(null);try{let e=await fetch("/api/questions/publish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({departmentId:t,term:et,year:new Date().getFullYear()})});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||"Failed to publish questions")}let s=await fetch("/api/departments/".concat(t,"/term-state"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({activeTerm:et,term:et,termVisibility:"PUBLISHED"})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||"Failed to update term visibility")}ed("PUBLISHED"),Y("Questions published for teachers")}catch(e){U(e instanceof Error?e.message:"Failed to publish")}finally{Q(!1),ec(!1)}}},children:"Confirm Publish"})]})]})]})]})]}),(0,a.jsxs)(o.Wu,{children:[0===ej.length?(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-10",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"Form Preview"}),(0,a.jsx)("div",{className:"text-sm",children:"Add questions to see how your evaluation form will look to users."})]}):(0,a.jsx)("div",{className:"space-y-4",children:ej.map((e,t)=>(0,a.jsxs)("div",{className:"rounded-md border p-3",children:[(0,a.jsxs)("div",{className:"font-medium",children:["Q",t+1,". ",e.question]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",e.type]})]},e.id))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6",children:[(0,a.jsxs)("div",{className:"rounded-lg border p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold",children:ej.length}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Questions"})]}),(0,a.jsxs)("div",{className:"rounded-lg border p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold",children:ej.filter(e=>e.required).length}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Required Questions"})]})]})]})]})]})}),(0,a.jsx)(d.av,{value:"evaluate",className:"space-y-6",children:0===ef.length?(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"text-center py-12",children:(0,a.jsxs)("div",{className:"text-gray-500",children:[(0,a.jsx)("div",{className:"text-lg font-medium mb-2",children:"No Teachers Available for Review"}),(0,a.jsx)("div",{className:"text-sm",children:X||"No teachers have submitted their evaluations yet, or teacher evaluation access has not been enabled by the Admin."})]})})}):(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6",children:ef.map((e,t)=>(0,a.jsxs)(o.Zp,{className:"overflow-hidden",children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.ZB,{children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b.E,{variant:eD(e.status),className:"SUBMITTED"===e.status?"bg-emerald-100 text-emerald-700":"IN_PROGRESS"===e.status?"bg-amber-100 text-amber-700":"NOT_STARTED"===e.status?"bg-rose-100 text-rose-700":void 0,children:ek(e.status)}),(0,a.jsx)("button",{type:"button","aria-label":em===e.id?"Collapse":"Expand",onClick:()=>eu(t=>t===e.id?null:e.id),className:"p-1.5 rounded-md border border-gray-200 text-gray-600 hover:bg-gray-100",children:em===e.id?(0,a.jsx)(D.A,{className:"w-4 h-4"}):(0,a.jsx)(k.A,{className:"w-4 h-4"})})]})]})}),em===e.id&&(0,a.jsxs)(o.Wu,{className:"space-y-3",children:[(0,a.jsx)(v,{}),(0,a.jsx)(y.nD,{type:"single",collapsible:!0,className:"w-full",children:(0,a.jsxs)(y.As,{value:"review",children:[(0,a.jsx)(y.$m,{className:"text-blue-600 hover:underline underline-offset-2 decoration-blue-400",onClick:async()=>{try{var t;let s=await fetch("/api/reviews/hod/teacher-data?teacherId=".concat(e.id,"&term=").concat(et));if(!s.ok)return;let a=await s.json(),n={};null==(t=a.answers)||t.forEach(e=>{var t;n[(null==(t=e.question)?void 0:t.question)||e.questionId]=e.answer}),z(t=>t.map(t=>t.id===e.id?{...t,answers:n,selfComment:a.selfComment||t.selfComment}:t))}catch(e){console.error("Failed to fetch teacher answers:",e)}},children:(0,a.jsx)("div",{className:"w-full flex items-center justify-between",children:(0,a.jsx)("span",{children:"View Teacher Answers"})})}),(0,a.jsx)(y.ub,{children:(0,a.jsx)("div",{className:"space-y-3",children:0===Object.keys(e.answers).length?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No answers loaded. Click the row again to refresh."}):(0,a.jsxs)(a.Fragment,{children:[Object.entries(e.answers).map((e,t)=>{let[s,n]=e;return(0,a.jsxs)("div",{className:"border-l-2 border-gray-200 pl-4",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-700",children:["Q",t+1,": ",s]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:(()=>{try{let e="string"==typeof n?JSON.parse(n):null;if(e&&e.details&&"object"==typeof e.details){let t=Object.entries(e.details).filter(e=>{let[,t]=e;return(t||"").trim().length>0});if(t.length>0)return(0,a.jsx)("div",{className:"space-y-1",children:t.map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-medium",children:[t,":"]})," ",s]},t)})})}}catch(e){}return(0,a.jsx)("span",{children:String(n)})})()})]},s)}),e.selfComment&&(0,a.jsxs)("div",{className:"border-l-2 border-blue-200 pl-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Teacher's Self Comment"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.selfComment})]})]})})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-start",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:gap-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 md:mb-0 md:w-40",children:"HOD Comment"}),(0,a.jsx)(j.T,{value:e.hodComment,onChange:t=>eS(e.id,"hodComment",t.target.value),placeholder:"Add your evaluation comment...",rows:2,className:"min-h-0 md:flex-1",disabled:!e.canReview})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:gap-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 md:mb-0 md:w-40",children:"Points (1-10)"}),(0,a.jsx)(p.p,{type:"number",min:"1",max:"10",value:e.hodScore,onChange:t=>{let s=Math.max(1,Math.min(10,parseInt(t.target.value)||0));eS(e.id,"hodScore",s)},onBlur:t=>{let s=parseInt(t.target.value)||0;if(s<1||s>10){let t=Math.max(1,Math.min(10,s));eS(e.id,"hodScore",t)}},placeholder:"Enter points...",disabled:!e.canReview,className:"md:w-40"}),e.hodScore<1||e.hodScore>10?(0,a.jsx)("span",{className:"text-xs text-red-500",children:"Score must be between 1-10"}):null]}),(0,a.jsxs)("div",{className:"mt-2 space-y-3",children:[(0,a.jsx)("div",{className:"text-base md:text-lg font-semibold",children:"Professionalism"}),["Compliance","Punctuality/Attendance","Ability to deal with students","Competence and Performance"].map((t,s)=>{var n;let i="[Professionalism] ".concat(t),r=(null==(n=e.rubric)?void 0:n[i])||0;return(0,a.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,a.jsxs)("span",{className:"text-sm",children:[(0,a.jsxs)("span",{className:"font-medium mr-2",children:[s+1,"."]}),t]}),(0,a.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5].map(t=>(0,a.jsx)("button",{type:"button",onClick:()=>e.canReview&&eS(e.id,"rubric",{...e.rubric||{},[i]:t}),className:"w-8 h-8 rounded border text-sm ".concat(r===t?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"),disabled:!e.canReview,children:t},t))})]},i)}),(0,a.jsx)("div",{className:"text-base md:text-lg font-semibold mt-3",children:"College Responsibilities"}),["Attending Non-Teaching Activities","Department Related Duties","Collegial Relationship","Ability to Deal with Supervisors","Participation in College Committees"].map((t,s)=>{var n;let i="[Responsibilities] ".concat(t),r=(null==(n=e.rubric)?void 0:n[i])||0;return(0,a.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,a.jsxs)("span",{className:"text-sm",children:[(0,a.jsxs)("span",{className:"font-medium mr-2",children:[s+1,"."]}),t]}),(0,a.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5].map(t=>(0,a.jsx)("button",{type:"button",onClick:()=>e.canReview&&eS(e.id,"rubric",{...e.rubric||{},[i]:t}),className:"w-8 h-8 rounded border text-sm ".concat(r===t?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"),disabled:!e.canReview,children:t},t))})]},i)}),(0,a.jsx)("div",{className:"text-base md:text-lg font-semibold mt-3",children:"Professional Development"}),["In-Service Training","Research and Publications","National and International Conferences"].map((t,s)=>{var n;let i="[Development] ".concat(t),r=(null==(n=e.rubric)?void 0:n[i])||0;return(0,a.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,a.jsxs)("span",{className:"text-sm",children:[(0,a.jsxs)("span",{className:"font-medium mr-2",children:[s+1,"."]}),t]}),(0,a.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5].map(t=>(0,a.jsx)("button",{type:"button",onClick:()=>e.canReview&&eS(e.id,"rubric",{...e.rubric||{},[i]:t}),className:"w-8 h-8 rounded border text-sm ".concat(r===t?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"),disabled:!e.canReview,children:t},t))})]},i)}),(0,a.jsx)("div",{className:"text-base md:text-lg font-semibold mt-3",children:"Student & Community Engagement"}),["Student Advising","Student Engagement","Community Engagement"].map((t,s)=>{var n;let i="[Engagement] ".concat(t),r=(null==(n=e.rubric)?void 0:n[i])||0;return(0,a.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,a.jsxs)("span",{className:"text-sm",children:[(0,a.jsxs)("span",{className:"font-medium mr-2",children:[s+1,"."]}),t]}),(0,a.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5].map(t=>(0,a.jsx)("button",{type:"button",onClick:()=>e.canReview&&eS(e.id,"rubric",{...e.rubric||{},[i]:t}),className:"w-8 h-8 rounded border text-sm ".concat(r===t?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"),disabled:!e.canReview,children:t},t))})]},i)}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:(()=>{let t=e.rubric||{},s=[Object.keys(t).filter(e=>e.startsWith("[Professionalism]")),Object.keys(t).filter(e=>e.startsWith("[Responsibilities]")),Object.keys(t).filter(e=>e.startsWith("[Development]")),Object.keys(t).filter(e=>e.startsWith("[Engagement]"))],n=s.reduce((e,s)=>e+s.reduce((e,s)=>e+(t[s]||0),0),0),i=s.reduce((e,t)=>e+5*t.length,0),r=i>0?Math.round(n/i*100):0;return(0,a.jsx)("div",{children:(0,a.jsxs)("span",{children:["Estimated Total: ",r,"/100"]})})})()})]})]}),(0,a.jsx)("div",{className:"flex flex-col items-stretch md:items-end gap-2 pt-1",children:e.canReview&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f.$,{variant:"outline",className:"w-full md:w-44 bg-gray-100 text-gray-700 hover:bg-gray-200 border-0",disabled:H,children:[(0,a.jsx)(R,{className:"h-4 w-4 mr-2"}),"Save Draft"]}),(0,a.jsxs)(S.Lt,{children:[(0,a.jsx)(S.tv,{asChild:!0,children:(0,a.jsxs)(f.$,{className:"w-full md:w-44 bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{},disabled:_||"REVIEWED"===e.status,children:[_?(0,a.jsx)(E.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(O,{className:"h-4 w-4 mr-2"}),_?"Submitting...":"Submit Evaluation"]})}),(0,a.jsxs)(S.EO,{children:[(0,a.jsxs)(S.wd,{children:[(0,a.jsx)(S.r7,{children:"Submit Evaluation?"}),(0,a.jsxs)(S.$v,{children:["Are you sure you want to submit your review for ",e.name,"? This action cannot be undone."]})]}),(0,a.jsxs)(S.ck,{children:[(0,a.jsx)(S.Zr,{disabled:_,children:"Cancel"}),(0,a.jsx)(S.Rx,{onClick:()=>eE(e.id),disabled:_,children:_?"Submitting...":"Confirm Submit"})]})]})]})]})})]})]})]},e.id))})}),(0,a.jsxs)(d.av,{value:"summary",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{children:"Total Questions"})}),(0,a.jsxs)(o.Wu,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:ej.length}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Questions created"})]})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{children:"Teachers Evaluated"})}),(0,a.jsxs)(o.Wu,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:ef.filter(e=>"REVIEWED"===e.status).length}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Out of ",ef.length," teachers"]}),(0,a.jsx)(N.k,{value:ef.length>0?ef.filter(e=>"REVIEWED"===e.status).length/ef.length*100:0,className:"mt-2"})]})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{children:"Average Score"})}),(0,a.jsxs)(o.Wu,{children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[ef.length>0?Math.round(ef.reduce((e,t)=>e+t.hodScore,0)/ef.length):0,"/10"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Department average"})]})]})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{children:"Recent Activity"})}),(0,a.jsx)(o.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:ef.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Status: ",ek(e.status)]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.hodScore,"/10 points"]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"REVIEWED"===e.status?"Completed":"Pending"})]})]},e.id))})})]})]}),(0,a.jsx)(d.av,{value:"my-evaluation",className:"space-y-6",children:(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{children:[(0,a.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"h-5 w-5"}),"My Performance Evaluation"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"View and download your performance evaluation reports (only available after Dean finalizes)"})]}),(0,a.jsx)(o.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[G&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-blue-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(P.A,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:"Start Term Evaluation Report"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Ready for download"})]})]}),(0,a.jsxs)(f.$,{variant:"default",size:"sm",onClick:()=>eC("START"),disabled:H,children:[H?(0,a.jsx)(E.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(q.A,{className:"h-4 w-4 mr-2"}),H?"Generating...":"Download PDF"]})]}),K&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-green-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(P.A,{className:"h-5 w-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:"End Term Evaluation Report"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Ready for download"})]})]}),(0,a.jsxs)(f.$,{variant:"default",size:"sm",onClick:()=>eC("END"),disabled:H,children:[H?(0,a.jsx)(E.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(q.A,{className:"h-4 w-4 mr-2"}),H?"Generating...":"Download PDF"]})]}),!G&&!K&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(P.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"No evaluation reports available yet."}),(0,a.jsx)("p",{className:"text-sm",children:"Reports will appear here after Dean finalizes your evaluation."})]})]})})]})})]})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Please log in to access the HOD dashboard."}),(0,a.jsx)(E.A,{className:"w-8 h-8 animate-spin mx-auto"})]})})}function z(){return(0,a.jsx)(I.PageErrorBoundary,{pageName:"HOD Dashboard",children:(0,a.jsx)(I.r0,{dataType:"HOD dashboard data",children:(0,a.jsx)(M,{})})})}},28857:(e,t,s)=>{"use strict";s.d(t,{k:()=>y});var a=s(95155),n=s(12115),i=s(46081),r=s(63655),l="Progress",[d,o]=(0,i.A)(l),[c,m]=d(l),u=n.forwardRef((e,t)=>{var s,n,i,l;let{__scopeProgress:d,value:o=null,max:m,getValueLabel:u=v,...x}=e;(m||0===m)&&!f(m)&&console.error((s="".concat(m),n="Progress","Invalid prop `max` of value `".concat(s,"` supplied to `").concat(n,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let h=f(m)?m:100;null===o||b(o,h)||console.error((i="".concat(o),l="Progress","Invalid prop `value` of value `".concat(i,"` supplied to `").concat(l,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let g=b(o,h)?o:null,y=j(g)?u(g,h):void 0;return(0,a.jsx)(c,{scope:d,value:g,max:h,children:(0,a.jsx)(r.sG.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":j(g)?g:void 0,"aria-valuetext":y,role:"progressbar","data-state":p(g,h),"data-value":null!=g?g:void 0,"data-max":h,...x,ref:t})})});u.displayName=l;var x="ProgressIndicator",h=n.forwardRef((e,t)=>{var s;let{__scopeProgress:n,...i}=e,l=m(x,n);return(0,a.jsx)(r.sG.div,{"data-state":p(l.value,l.max),"data-value":null!=(s=l.value)?s:void 0,"data-max":l.max,...i,ref:t})});function v(e,t){return"".concat(Math.round(e/t*100),"%")}function p(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function j(e){return"number"==typeof e}function f(e){return j(e)&&!isNaN(e)&&e>0}function b(e,t){return j(e)&&!isNaN(e)&&e<=t&&e>=0}h.displayName=x;var g=s(59434);function y(e){let{className:t,value:s,indicatorClassName:n,trackClassName:i,...r}=e;return(0,a.jsx)(u,{"data-slot":"progress",className:(0,g.cn)("relative h-2 w-full overflow-hidden rounded-full",i||"bg-primary/20",t),...r,children:(0,a.jsx)(h,{"data-slot":"progress-indicator",className:(0,g.cn)("h-full w-full flex-1 transition-all bg-primary",n),style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})}},57434:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},79071:(e,t,s)=>{Promise.resolve().then(s.bind(s,23119))},88489:(e,t,s)=>{"use strict";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?e:t}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"string"==typeof e?e:t}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=Number(e);return!isNaN(s)&&isFinite(s)?s:t}function r(e,t,s){if(!e||"object"!=typeof e)return s;let a={...s};for(let[s,n]of Object.entries(t))if(s in e){let t=e[s];"string"==typeof n&&"string"==typeof t||"number"==typeof n&&"number"==typeof t||"boolean"==typeof n&&"boolean"==typeof t||Array.isArray(n)&&Array.isArray(t)?a[s]=t:n&&"object"==typeof n&&t&&"object"==typeof t&&(a[s]=t)}return a}function l(e){var t,s;return{id:n(null==e?void 0:e.id)||"",name:n(null==e?void 0:e.name)||"Unknown User",email:n(null==e?void 0:e.email)||"",role:n(null==e?void 0:e.role)||"TEACHER",department:(null==e?void 0:e.department)?{id:n(null==(t=e.department)?void 0:t.id),name:n(null==(s=e.department)?void 0:s.name)}:null}}function d(e){var t,s,l;return{id:n(null==e?void 0:e.id)||"",name:n(null==e?void 0:e.name)||"Unknown Department",createdAt:n(null==e?void 0:e.createdAt)||new Date().toISOString(),updatedAt:n(null==e?void 0:e.updatedAt)||new Date().toISOString(),hod:(null==e?void 0:e.hod)?{id:n(null==(t=e.hod)?void 0:t.id),name:n(null==(s=e.hod)?void 0:s.name)}:void 0,termStates:a(null==e?void 0:e.termStates).map(e=>r(e,{activeTerm:"START",startTermVisibility:"",endTermVisibility:""},{activeTerm:"START",startTermVisibility:"HIDDEN",endTermVisibility:"HIDDEN"})),_count:{users:i(null==e||null==(l=e._count)?void 0:l.users)||0}}}function o(e){return r(e,{id:"",type:"",message:"",department:null,timestamp:""},{id:"",type:"UNKNOWN",message:"Unknown activity",department:null,timestamp:new Date().toISOString()})}s.d(t,{Ju:()=>i,NV:()=>l,jX:()=>a,nr:()=>n,se:()=>d,zX:()=>o})},88539:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var a=s(95155);s(12115);var n=s(59434);function i(e){let{className:t,...s}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,n.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}},91788:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}},e=>{e.O(0,[6169,2108,699,7754,6304,1438,9687,8892,5244,8441,5964,7358],()=>e(e.s=79071)),_N_E=e.O()}]);